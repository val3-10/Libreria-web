<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro de Usuarios - Booknest Admin</title>
  <link rel="stylesheet" href="registro_admin.css">
</head>
<body class="login-body">

  <div class="login-box">
    <h2>Registrar Nuevo Usuario</h2>

    <form onsubmit="return registrarUsuarioAdmin()">
      <label for="nombre">Nombre completo:</label>
      <input type="text" id="nombre" placeholder="Nombre del usuario" required>

      <label for="correo">Correo:</label>
      <input type="email" id="correo" placeholder="usuario@booknest.com" required>

      <label for="password">Contraseña:</label>
      <input type="password" id="password" placeholder="Contraseña" required>

      <label for="rol">Rol:</label>
      <select id="rol" required>
        <option value="cliente" selected>Cliente</option>
        <option value="admin">Administrador</option>
      </select>

      <button type="submit">Registrar Usuario</button>
    </form>

    <p><a href="admin.html">← Volver al panel de administración</a></p>
  </div>

  <script>
    function registrarUsuarioAdmin() {
      const nombre = document.getElementById("nombre").value.trim();
      const correo = document.getElementById("correo").value.trim();
      const password = document.getElementById("password").value.trim();
      const rol = document.getElementById("rol").value;

      // Validar correo
      if (!correo.endsWith("@booknest.com")) {
        alert("El correo debe pertenecer al dominio @booknest.com");
        return false;
      }

      // Validar contraseña
      if (password.length < 4) {
        alert("La contraseña debe tener al menos 4 caracteres");
        return false;
      }

      // Obtener lista actual de usuarios
      const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];

      // Comprobar si el correo ya existe
      if (usuarios.some(u => u.correo === correo)) {
        alert("Este correo ya está registrado");
        return false;
      }

      // Crear nuevo usuario
      const nuevoUsuario = {
        nombre: nombre,
        correo: correo,
        password: password,
        rol: rol,
        carrito: [],
        historial: []
      };

      // Guardar en localStorage
      usuarios.push(nuevoUsuario);
      localStorage.setItem("usuarios", JSON.stringify(usuarios));

      alert(`Usuario "${nombre}" (${rol}) registrado con éxito.`);
      window.location.href = "admin.html";
      return false;
    }
  </script>

</body>
</html>










